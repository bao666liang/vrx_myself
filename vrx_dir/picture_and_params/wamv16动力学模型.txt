wam-v波浪自适应救助船的耐波性计算，给出波浪自适应船的图：其中起到波浪自适应的结构是弹簧，想要计算这艘船的耐波性，
目前使用hydrostar软件，但是这艘船主要功能在其机械结构上，hydrostar中无法添加弹簧，求助使用什么软件合适？方便添加机械结构，求出其RAO等参数

(由.h和.c(usv_gazebo_plugin文件夹)生成.so(devel/lib文件夹) 第十章和csdn)

输入推力指令，推力模型产生指定的推力(外加风浪流的作用力)，usv_gazebo_dynamics_plugin.so模拟船舶，将力作用在船舶网格点，
通过程序(dynamics：通过真实速度带入等式左边)让gazebo仿真输出该加速度下状态量，如速度(gazebo显示的状态)

wamv动力学方程： 
     1.刚体动力学参数由gazebo生成（固定，仅取决于船体）  wamv_base.urdf.xacro (不过也要加入传感器和推进器，电池组等配件)。
     2.流体(水)动力学参数由libusv_gazebo_dynamics_plugin.so插件在运行时动态加载，其由sdf描述加载，在  -> 代码:usv_gazebo_dynamics_plugin.cc -> libusv_gazebo_dynamics_plugin.so 
     wamv_gazebo_dynamics_plugin.xacro中指定了相关参数 。
     v = vr + vx,vr表示船相对水体的速度(即body自身速度)，vx为流体速度，v为wamv合速度odom.v
     
推进器描述：代码:usv_gazebo_thrust_plugin.cc -> libusv_gazebo_thrust_plugin.so
            参数描述(用于rviz/gazebo显示)wamv_t_thrusters.xacro  ->   wamv_gazebo_thruster_config.xacro
     
launch传感器配置文件：wamv_gazebo.urdf.xcaro  102行:if(vrx_secsor_enabled)  则加载以下传感器

如果要在gazebo中添加动态障碍物在rviz中显示，那么障碍物也要有话题发布，由rviz订阅？另外point_publish为rviz发布路径点，可以用程序订阅该话题实现自动导航

ros_control: Transmission为传动装置，比如电机或电机连杆，其和轮胎(与外物直接接触)相连，接口为电机转速，controller为控制器，比如电机驱动板，输入为cmd_vel，
则电机驱动板将其转化为电机转速，输出到底层电机为电流，控制电机转速，而车辆(阿克曼模型)的电机转速就是轮胎转速，即线速度和角速度，
但船舶电机转速不是船舶速度，而要用推力，因此不用ros_control，不过能用ros_control的力控制器吗？？joint_effort_controller


    M_A:附加质量矩阵（added mass ），附加质量力（视质量力）是流体中的浮体所受的一种力，它是由于要使浮体周围流体加速而引起的附加作用力。
    当浮体在流体中作加速运动时，它要引起周围流体做加速运动。由于流体有惯性（惯性力为阻力），表现为对浮体有一个反作用力（阻力）。这时，
    推动浮体运动的力将大于浮体本身的惯性力，就好像浮体质量增加了一样。所以这部分大于浮体本身惯性力的力叫附加质量力。附加质量表征惯性力大小，
    这种力与物体加速度成正比。而additional added mass 意思为附连水质量，浮体在水中运动时会带动周边的一部分水一起运动  。

    D：附加阻尼矩阵，这里的阻尼指的是由于物体在含有自由表面的流体中运动，势必会兴波，而兴起波浪必然会带走能量，这个能量就是物体运动做的功，
    体现为物体受到的阻力，大小与物体运动的速度相关

    至此，我们描述了物体在流体中运动的两种力，一种与物体加速正比M_A，一种与速度正比D，此外再加上与物体位移正比的恢复力g，一旦物体运动确定，
    我们就可以方便的求解运动方程(显然，这是线性系统，显然运动与受力不耦合，显然实际情况中我们不太可能把物体受力就分离出这几个还有许多非线性项, 显然这两个概念在频域中尤为合

    C_A:科里奥利和向心力矩阵，科里奥利力是处于转动参考系（比如自传的地球，旋转的圆盘等）中的物体在运动时受到的一种惯性力(直线变为弧线)。
    转动参考系中的物体会受到两种惯性力的作用，一种是离心力，另一种就是科里奥利力。在转动参考系中观察，任何物体都会受到离心力的作用。
    而只有当物体相对旋转参考系运动时，才会观测到科里奥利力。因此物体要受到科里奥利力需要满足两个条件：
   1.在转动参考系内观察
   2.物体相对转动参考系要有一定速度 既然科里奥利力是惯性力，那么它的方向必然和惯性系下对应的加速度方向相反 
   (CA包括非线性Munk力矩，遵循SNAME的水动力导数符号。目前，由于在估计和验证相关参数方面存在挑战,为了简单起见，模型中忽略了C_A这些项）

Parameter <zDotW> not found: Using default value of <0.1>.
Parameter <kDotP> not found: Using default value of <0.1>.
Parameter <mDotQ> not found: Using default value of <0.1>.
Parameter <zWW> not found: Using default value of <0>.
Parameter <kPP> not found: [ INFO] [1663584361Using default value of <0>.
Parameter <mQQ> not found: Using default value of <0>.


   因此高级控制往往使用动力学模型(给什么力产生什么加速度)，而不是运动学模型(给什么速度就是什么速度)
   车体动力学模型主要研究的是车体在加速度产生的惯性力和车轮打滑产生的摩擦力的影响下车体速度的计算。

   轨迹跟踪：速度跟踪的纵向控制的PID控制算法和用于路径跟踪的横向控制的最优LQR控制算法以及最优前馈LQR控制算法，
   轨迹跟踪更具体来说是船舶在规定的时间内，到达原本设定的位置上,即利用螺旋桨推进力和转船力矩将相对于
   轨迹的纵向位置和横向位置误差都镇定到零, 要求跟踪上船的6个状态，他们的跟踪误差都要满足控制要求

   路径可以取前视距离，仅要求ye->0。轨迹上的路径点如果跟踪上，每时每刻每个点和船的位置其误差都为0(xe->0,ye->0)
   因此轨迹跟踪也是用nav::path信息，对线速度u有要求(但是或隐式或明示的给定了)！！！！！！
   因此轨迹跟踪可以跟踪速度(即轨迹为u,v,t自定义)，也可以跟踪时间(即轨迹为y(t),x(t)))

   DWA局部规划出的是轨迹，要控制量为线速度和转向角速度(对应船的u和r！！！)
   看你想控制的是什么，如果是线速度和转向角速度(相当于轨迹了,有时间信息,规划了几秒)，则应求出误差，运用动力学模型和相应的控制方法求出推力和扭矩(u:输入)
   如果是位置x,y(相当于路径),同样应求出xe,ye，运用动力学和合适的控制方法求解输入tao(u)
   如果考虑舒适性控制加速度和jerk加加速度呢？？？应该是看你想控制到什么程度
   水动力模型可以写为状态方程，便于根据实时状态反馈(方程)求解出控输入(力)的大小

   船舶六个自由度：x、y、z三个方向的移动和x、y、z轴的转动，以船舶前进方向为x正向，垂直水面向上为z轴正向，
   y轴正向就是水平横向向左。看字面意思就差不多可以知道了，沿y轴的横向移动就是横荡，沿x轴的纵向移动就是纵荡，沿z轴的上下移动就是垂荡，
   绕z轴旋转就是艏摇（也叫平摇，就是穿在水面打转），绕y轴旋转就是横摇，绕x轴旋转就是纵摇 

   车前进角速度的计算：
   基于自行车模型，线速度可以和推力线性对应，角速度w=v/(L/tan(delta))，L为长度，
   基于差动模型，v = (vr+vl)/2 ,而航向角变化了多少角度，它就绕其运动轨迹的圆心旋转了多少角度，
   所以可以得到机器人绕圆心运动的角速度，它也是机器人航向角变化的速度：w = (vr-vl)/l ，l为宽度
  
   分开控制？？先作为路径跟踪，ye->0,同时跟踪vx，xe->0  (然后将pid换成动力学的反步/mpc？？)
   或者将轨迹解算为关于时间的参数,但程序是离散的，即模拟一秒的轨迹是由毫秒间隔的直线段连接的，因此跟踪也是nav::path信息
   
   
  


     
     




     
